-roles a los usuarios (incompleto falta el rol de admin)
-registro de usuarios (completo)
-login(semi funcional al  hacer login no redirige hacia incio sin recargar la pagina)
-denegacion de rutas si no esta login

-------------------------------------------------------------------------------------------
faltantes:
crear un usuario admin para que pueda: agregar, modificar(precio, descripcion, stock )de los prodcutos
completar el admin component en donde estaria eso




----------------------------------------------------------------------------------------------------------


base de datos modificada :



-- CREACIÓN DE LA BASE DE DATOS

-- MySQL Script generated by MySQL Workbench
-- Sun May  5 13:26:21 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema Ferremas
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema Ferremas
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Ferremas` DEFAULT CHARACTER SET utf8 ;
USE `Ferremas` ;

-- -----------------------------------------------------
-- Table `Ferremas`.`Rol`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Rol` (
  `idRol` INT NOT NULL,
  `nombreRol` VARCHAR(45) NOT NULL,
  `descRol` TEXT NOT NULL,
  PRIMARY KEY (`idRol`))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Usuario` (
  `idUsuario` INT NOT NULL AUTO_INCREMENT,
  `nombreUsuario` VARCHAR(45) NOT NULL,
  `contrasenaUsuario` VARCHAR(45) NOT NULL,
  `emailUsuario` VARCHAR(60) NOT NULL,
  `fechaRegistro_Usuario` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `direccionUsuario` VARCHAR(200) NOT NULL,
  `Rol_idRol` INT NOT NULL,
  PRIMARY KEY (`idUsuario`, `Rol_idRol`),
  INDEX `fk_Usuario_Rol_idx` (`Rol_idRol` ASC) VISIBLE,
  CONSTRAINT `fk_Usuario_Rol`
    FOREIGN KEY (`Rol_idRol`)
    REFERENCES `Ferremas`.`Rol` (`idRol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Categoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Categoria` (
  `idCategoria` INT NOT NULL AUTO_INCREMENT,
  `nombreCategoria` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idCategoria`))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Producto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Producto` (
  `idProducto` INT NOT NULL AUTO_INCREMENT,
  `nombreProducto` VARCHAR(45) NOT NULL,
  `descProducto` TEXT NULL,
  `precioProducto` INT NOT NULL,
  `stockProducto` INT NOT NULL,
  `imagenProducto` VARCHAR(500) NOT NULL,
  `Categoria_idCategoria` INT NOT NULL,
  PRIMARY KEY (`idProducto`, `Categoria_idCategoria`),
  INDEX `fk_Producto_Categoria1_idx` (`Categoria_idCategoria` ASC) VISIBLE,
  CONSTRAINT `fk_Producto_Categoria1`
    FOREIGN KEY (`Categoria_idCategoria`)
    REFERENCES `Ferremas`.`Categoria` (`idCategoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Carrito`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Carrito` (
  `idCarrito` INT NOT NULL,
  `fechaCreacion_Carrito` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `Usuario_idUsuario` INT NOT NULL,
  `Usuario_Rol_idRol` INT NOT NULL,
  PRIMARY KEY (`idCarrito`, `Usuario_idUsuario`, `Usuario_Rol_idRol`),
  INDEX `fk_Carrito_Usuario1_idx` (`Usuario_idUsuario` ASC, `Usuario_Rol_idRol` ASC) VISIBLE,
  CONSTRAINT `fk_Carrito_Usuario1`
    FOREIGN KEY (`Usuario_idUsuario` , `Usuario_Rol_idRol`)
    REFERENCES `Ferremas`.`Usuario` (`idUsuario` , `Rol_idRol`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Productos_Carrito`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Productos_Carrito` (
  `idProductos_Carrito` INT NOT NULL AUTO_INCREMENT,
  `cantidadProductos_Carrito` INT NOT NULL,
  `Producto_idProducto` INT NOT NULL,
  `Carrito_idCarrito` INT NOT NULL,
  PRIMARY KEY (`idProductos_Carrito`, `Producto_idProducto`, `Carrito_idCarrito`),
  INDEX `fk_Productos_Carrito_Producto1_idx` (`Producto_idProducto` ASC) VISIBLE,
  INDEX `fk_Productos_Carrito_Carrito1_idx` (`Carrito_idCarrito` ASC) VISIBLE,
  CONSTRAINT `fk_Productos_Carrito_Producto1`
    FOREIGN KEY (`Producto_idProducto`)
    REFERENCES `Ferremas`.`Producto` (`idProducto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Productos_Carrito_Carrito1`
    FOREIGN KEY (`Carrito_idCarrito`)
    REFERENCES `Ferremas`.`Carrito` (`idCarrito`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Tipo_Despacho`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Tipo_Despacho` (
  `idTipo_Despacho` INT NOT NULL AUTO_INCREMENT,
  `nombreTipo_Despacho` VARCHAR(45) NOT NULL,
  `direccion_Despacho` VARCHAR(200) NULL,
  PRIMARY KEY (`idTipo_Despacho`))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Pedido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Pedido` (
  `idPedido` INT NOT NULL AUTO_INCREMENT,
  `precioPedido` VARCHAR(45) NOT NULL,
  `fechaPedido` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `estadoPedido` VARCHAR(45) NOT NULL DEFAULT '\"Esperando Confirmación\"',
  `Productos_Carrito_idProductos_Carrito` INT NOT NULL,
  `Productos_Carrito_Producto_idProducto` INT NOT NULL,
  `Productos_Carrito_Carrito_idCarrito` INT NOT NULL,
  `Tipo_Despacho_idTipo_Despacho` INT NOT NULL,
  PRIMARY KEY (`idPedido`, `Productos_Carrito_idProductos_Carrito`, `Productos_Carrito_Producto_idProducto`, `Productos_Carrito_Carrito_idCarrito`, `Tipo_Despacho_idTipo_Despacho`),
  INDEX `fk_Pedido_Productos_Carrito1_idx` (`Productos_Carrito_idProductos_Carrito` ASC, `Productos_Carrito_Producto_idProducto` ASC, `Productos_Carrito_Carrito_idCarrito` ASC) VISIBLE,
  INDEX `fk_Pedido_Tipo_Despacho1_idx` (`Tipo_Despacho_idTipo_Despacho` ASC) VISIBLE,
  CONSTRAINT `fk_Pedido_Productos_Carrito1`
    FOREIGN KEY (`Productos_Carrito_idProductos_Carrito` , `Productos_Carrito_Producto_idProducto` , `Productos_Carrito_Carrito_idCarrito`)
    REFERENCES `Ferremas`.`Productos_Carrito` (`idProductos_Carrito` , `Producto_idProducto` , `Carrito_idCarrito`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pedido_Tipo_Despacho1`
    FOREIGN KEY (`Tipo_Despacho_idTipo_Despacho`)
    REFERENCES `Ferremas`.`Tipo_Despacho` (`idTipo_Despacho`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Tipo_Pago`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Tipo_Pago` (
  `idTipo_Pago` INT NOT NULL AUTO_INCREMENT,
  `nombreTipo_Pago` VARCHAR(45) NOT NULL,
  `descTipo_Pago` VARCHAR(200) NULL,
  PRIMARY KEY (`idTipo_Pago`))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Pago_Pedido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Pago_Pedido` (
  `idPago_Pedido` INT NOT NULL AUTO_INCREMENT,
  `fechaPago_Pedido` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `montoPago_Pedido` INT NOT NULL,
  `estadoPago_Pedido` VARCHAR(45) NOT NULL,
  `informacionPago_Pedido` VARCHAR(200) NULL,
  `Pedido_idPedido` INT NOT NULL,
  `Tipo_Pago_idTipo_Pago` INT NOT NULL,
  PRIMARY KEY (`idPago_Pedido`, `Pedido_idPedido`, `Tipo_Pago_idTipo_Pago`),
  INDEX `fk_Pago_Pedido_Pedido1_idx` (`Pedido_idPedido` ASC) VISIBLE,
  INDEX `fk_Pago_Pedido_Tipo_Pago1_idx` (`Tipo_Pago_idTipo_Pago` ASC) VISIBLE,
  CONSTRAINT `fk_Pago_Pedido_Pedido1`
    FOREIGN KEY (`Pedido_idPedido`)
    REFERENCES `Ferremas`.`Pedido` (`idPedido`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pago_Pedido_Tipo_Pago1`
    FOREIGN KEY (`Tipo_Pago_idTipo_Pago`)
    REFERENCES `Ferremas`.`Tipo_Pago` (`idTipo_Pago`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Ferremas`.`Boleta`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Ferremas`.`Boleta` (
  `idBoleta` INT NOT NULL AUTO_INCREMENT,
  `numeroBoleta` VARCHAR(50) NOT NULL,
  `fechaEmisionBoleta` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `total_Boleta` INT NOT NULL,
  `Pago_Pedido_idPago_Pedido` INT NOT NULL,
  `Pago_Pedido_Pedido_idPedido` INT NOT NULL,
  `Pago_Pedido_Tipo_Pago_idTipo_Pago` INT NOT NULL,
  PRIMARY KEY (`idBoleta`, `Pago_Pedido_idPago_Pedido`, `Pago_Pedido_Pedido_idPedido`, `Pago_Pedido_Tipo_Pago_idTipo_Pago`),
  INDEX `fk_Boleta_Pago_Pedido1_idx` (`Pago_Pedido_idPago_Pedido` ASC, `Pago_Pedido_Pedido_idPedido` ASC, `Pago_Pedido_Tipo_Pago_idTipo_Pago` ASC) VISIBLE,
  CONSTRAINT `fk_Boleta_Pago_Pedido1`
    FOREIGN KEY (`Pago_Pedido_idPago_Pedido` , `Pago_Pedido_Pedido_idPedido` , `Pago_Pedido_Tipo_Pago_idTipo_Pago`)
    REFERENCES `Ferremas`.`Pago_Pedido` (`idPago_Pedido` , `Pedido_idPedido` , `Tipo_Pago_idTipo_Pago`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


-- DATOS PARA LA TABLA DE CATEGORÍA


INSERT INTO Ferremas.Categoria (nombreCategoria) VALUES ('Herramientas'); 
INSERT INTO Ferremas.Categoria (nombreCategoria) VALUES ('Materiales'); 
INSERT INTO Ferremas.Categoria (nombreCategoria) VALUES ('Electrodomésticos');


-- DATOS PARA LA TABLA DE PRODUCTOS


INSERT INTO Ferremas.Producto (nombreProducto, descProducto, precioProducto, stockProducto, imagenProducto, Categoria_idCategoria) VALUES ('Martillo', 'Martillo de acero resistente', 8000, 50, "http://imgfz.com/i/DWLt0uw.jpeg", 1);
INSERT INTO Ferremas.Producto (nombreProducto, descProducto, precioProducto, stockProducto, imagenProducto, Categoria_idCategoria) VALUES ('Clavos', 'Clavos de hierro galvanizado', 3000, 100, "http://imgfz.com/i/6JmnXRe.png", 1);
INSERT INTO Ferremas.Producto (nombreProducto, descProducto, precioProducto, stockProducto, imagenProducto, Categoria_idCategoria) VALUES ('Taladro', 'Taladro eléctrico inalámbrico', 80000, 30, "http://imgfz.com/i/7h89pwY.jpeg", 1);
INSERT INTO Ferremas.Producto (nombreProducto, descProducto, precioProducto, stockProducto, imagenProducto, Categoria_idCategoria) VALUES ('Pintura', 'Pintura Acrizinc', 15000, 100, "http://imgfz.com/i/jvMlLIQ.jpeg ", 2);
INSERT INTO Ferremas.Producto (nombreProducto, descProducto, precioProducto, stockProducto, imagenProducto, Categoria_idCategoria) VALUES ('Madera', 'Madera de pino', 5000, 200, "http://imgfz.com/i/zGanqJ5.jpeg", 2);
INSERT INTO Ferremas.Producto (nombreProducto, descProducto, precioProducto, stockProducto, imagenProducto, Categoria_idCategoria) VALUES ('Sierra Circular', 'Cierra Circular Makita', 150000, 20, "http://imgfz.com/i/lX9hiCg.jpeg", 3);

SELECT * FROM ferremas.productousuario;



INSERT INTO Ferremas.Rol (idRol, nombreRol, descRol) VALUES (1, 'usuario', 'Usuario general');
INSERT INTO Ferremas.Rol (idRol, nombreRol, descRol) VALUES (2, 'administrador', 'Administrador del sistema');

ALTER TABLE Usuario MODIFY contrasenaUsuario VARCHAR(60);


select * from usuario;